sudo: required

services:
  - docker

after_success:
  - docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASSWORD
  - export REPO=picnat/atlas
  - export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH ; fi`
  - docker build -f Dockerfile -t $REPO:$COMMIT .
  - docker tag $REPO:$COMMIT $REPO:$TAG
  - docker push $REPO

env:
  global:
    secure: "b8fQcyDSiCByKGAk0LWY5yQJWDsJq3A7iHf/xxt1ar2VhM94CQXtS9stBT8vY4OOZzyZjtYn0iVyiLiBW7m1eVFSMnmnmaQi7KqGNZIw46fQrMevpKfiJJh9KDU3kZWxewL/3oNFCsK0MlSNrTTHwU58HW1aTN1zIoXbEVQR0eiJpW6Vrvy4YZer7OJ2FK7yJge85LC/7l0j7Kp4gig/73VIE5WlfX5UkRyr5OLbmzbD0rhC0EAa7ofTloa1mCfcSN71MOXhVzCzHDG7jeQQEinSVJNBaDJ5Ffau0mlipDT16ECA4sm5AQ7PiriY5/YWjcM1jIF68ZVS5G75yAqstwuhQtPtVC6ap7Q5ERFE5lmKUKCVwN7TetL7hVYuUyLHxdTBHSMbEWc15K+tFqWktNdKTqfP1j0ph09kFZobRJEfZ0qCQLWcuLI0fu8hO/DdyVLxmbUN3Ofl4RrXYDIzXN8tXIY/uMfhuUgJup5TrgZjiIUUMwFLl1Tmhl5DjqvXRdTNmVq/BSP4lYXkJ4ySo1YM5R7cKaP9j2BPuopWGk6PBe7asIPL1+uHc+d0Zvz5AbUOAtEqf+hHPyPPjRb7d2YIljzhv+1iTkPbwLZWyP8ErXrXfbMp5Rzr0PeqhoPu1LTbkRvFE54g34AXuvOGP7RHJnDuID4NEeeKYQdkU/o="
    secure: "BOLxiTzEO6flHq+95Z721vQE9EOBfCtxco3o75skLzo638RW++FvJ+uBhfYGw3Y9qgXJAFkK8ehBAdiJ0usASxuGX6SyxDuELCwhq8j8hJWojhwpmZ7GnSSecVCKMTzPtDEy3qqsfXxXPb6m/3lLvJoKXpyDEaDZ5d/ENFQPlIDLcu7KokvsPBn1qmO+6jzmitTDr4QvNVYbfK7UuFHjDEnZ2ygOplC8eEBxIhJoGWjXos4zA92K5Gbqgh2gBKG43ajGx7LNNaofplv3NghV4Qb3diT3iBni4GdjcBcxtaGQv8nBHIioymZHxeq12sXIJT3eSZlXx/XfpwRznK7DhoSJpLV5EjOVmlfd51SYWuNEeTgRBKrIoy+W+ZMbLzcfUNEXpYc1hN8p+UqyS3u/jCAHWwUmztvK3wxdJGyg7Ys2SsUp0XXaOkAMWuxN+yxReUSHqjunswmKiWnneszhW7+SaHPn0AnZHdXFn49MAxllqw5GQqauAHRlfJSO7bjqhXpd7erUf021Qwf5hIqo/M34BTPcCri/ffcLHpjqGEluxrKSt9AxsZHwo+IGQc6oLUrENwB+Y/1z3rI1l0n04Oo1KZsv8LWhhTSZCw4wxlEB2ECJRgs9MlWBkrlkvP8PdUcSo/KSeYgpd9Lqbk4aCrfLXaHTltEbwlwZg2VF1GM="
    secure: "HLg5joa4Sap3IFAoNKM4bbD/wjAteHehfJvYR9pExeAD85bYriR3JyAaHqOldR59+FNzu3WbrE6mmKL/gUPfzq1X+mubggcrD2Aa8HPw1CqqjeQMUPP34AMlrKWE4w8VhzIJdxGQp436gsrohCJinGrTHMMpLaIzeHvvb0BGj2y+qI/ATmXCuK3HHGM+FOImsGBUL856iGetRdJlf5zXy6qztJTTfEOtN5hcCZD1vPyRcC+c43sh+rW9L4CC/Tfp7YIg8BejTJyKp37beLCymI9Z2vWLUVzCSHkWI0z6qf9o32aHDqguXjs3xXbHB/T0yQmEOthA2Jrd4o/X5r9D+KIX2LRCKUx3Qvrhti+CyAxm2yigQ1ICrq5ubzbrIOV9T9KjpxodxPUuihOnLwPl+RtXM/Np3PUhXk5dId+ShY4d5gXBwQs87t50GCaA95mq3FGQJsnoEg91dApfQGh2KdMhTv2Ea6QkoSvovnUPJM0QFBs+0w5WB4tiUAzfIguMsnlvC1lyzo9W88p6M2n/5Xh+MpCc/WcZboolehCozaAhhrDyi+T7ufQ6NYRRCh2ihMdjufPdKnlFEo4WdaGfNMSem1Y6ghu8pdy5xsn/rWir3M0jCAS1ze/t5iwPXMrEOEHQjWclzCRbldVSBOiqjJIMOWDJqdDsVankB8Qta3g="
    
